<?php include_once("../php/cn.php"); header("Access-Control-Allow-Origin:".AllowOriginAccess);header("Content-Type: text/plain; charset=UTF-8");  ?><div class="container p-t-30"><div class="card z-depth-2 border"><div class="listview lv-bordered lv-lg"><div class="lv-header-alt clearfix " ng-show="CURPAGE==0"><h2 class="lvh-label"><div ng-if="!MULTIPLE || selectedRowsIndexes.length==0" >  <i class="zmdi zmdi- m-r-10"></i> Entree ({{TOTALITEMS}})</div><ng-pluralize ng-if="MULTIPLE && selectedRowsIndexes.length>0" count="selectedRowsIndexes.length" when="{'0': 'Zéro ligne sélectionnée.','one': 'Une ligne sélectionnée .','other': '{} lignes sélectionnées.'}" ></ng-pluralize></h2><ul class="lv-actions actions"><li tooltip-class="tooltip-blue" uib-tooltip="Supprimer"><a ng-class="!selectedItem && !MULTIPLE ?'opa3 ':''" ng-if="PERMISSON[2].value"  ng-click="delete()" href="#"><i class="zmdi zmdi-delete"></i></a></li><li tooltip-class="tooltip-blue" uib-tooltip="Modifier/تعديل"><a ng-class="selectedItem==null?'opa3 ':''" ng-if="PERMISSON[1].value"  ng-click="infos(1)" href="#"><i class="zmdi zmdi-edit"></i></a></li><li tooltip-class="tooltip-blue" uib-tooltip="Ajouter/إضافة"><a  ng-click="add_ligne()" ng-if="PERMISSON[0].value" href="#"><i class="zmdi zmdi-plus"></i></a></li><li tooltip-class="tooltip-blue" uib-tooltip="Rafraîchir/تحديث"><a  ng-click="RELOAD(1)" href="#"><i class="zmdi zmdi-refresh"></i></a></li><li class="dropdown"   tooltip-class="tooltip-blue" uib-tooltip="Année"><select class="p-relative headertop"  ng-model="excercice" ng-change="RELOAD(1)"><?php for($i=date('Y');$i>=YEAR_START;$i--){echo "<option value='{$i}'>{$i}</option>";} ?></select></li>	<li class="dropdown" tooltip-class="tooltip-blue" uib-tooltip="Mois" ><select class="p-relative headertop"  ng-model="mois" ng-change="RELOAD(1)"><option value="-1">TOUS LES MOIS</option><?php foreach($MONTHS as $k=>$v){echo "<option value='{$k}'>{$v}</option>";} ?></select></li> <li><angucomplete  showlabel="false"  placeholder="Recherche Fournisseur" searchstr="edsde" st="width: 204px;margin: 0;padding: 0;position: relative;top: -14px;" stylex="margin: 0;border-radius: 6px;padding: 0px 6px;" idx="nsd45z" stylex="" showfield="name" selectedid="extra.four"   pause="100"  url="php/filter?action=four&c=" classx="" on-select="setFourReload(result)"   minlength="1" matchclass="highlighted" /></li><li ng-if="extra.four"><a  ng-click="clearFoor()" href="#"><i class="zmdi zmdi-close c-orange"></i></a></li><dh-paginate page-size="pageSize" ></dh-paginate></ul></div></div><div class="card-body o-hidden " style="min-height: 300px;"> <div class="smallloading" ng-if="LoaDing"></div><div class=""><div role="tabpanel" class="tab"><div class="tab-content p-0" ><div role="tabpanel" class="tab-pane animated  slideIn{{class}} "  ng-class="{'active':CURPAGE==0}"><table-directive ></table-directive></div><div role="tabpanel" class="tab-pane animated  slideIn{{class}} "  ng-class="{'active':CURPAGE==1}"><form name="FORM1" ng-submit="save()"><div class="action-header clearfix animatedx " style="margin-bottom:0px;"><div class="ah-label   f-20"></div><ul class="ah-actions actions a-alt"><li><button class="btn btn-default btn-icon-text waves-effect m-r-10"  type="reset" ng-click="cancellx()"><i class="zmdi zmdi-cancel"></i> Fermer</button></li><li><button class="btn btn-primary btn-icon-text waves-effect"  ng-disabled="FORM1.$invalid" type="submit"  ng-if="!INFO"><i class="zmdi zmdi-check"></i> Enregistrer</button></li></ul></div><div class="row-padding p-t-20 formpadding"><div class="col-12 col-sm-6 col-md-4 " ><div class="form-group  has-feedback has-success" ><label class="control-label" >Date Entree</label><div class="fg-line"  ><input ng-disabled="INFO" placeholder="Date " required  type="date" autocomplete="off"  class="form-control" ng-model="NEWITEM.date_en" ></div></div></div><div class="col-12 col-sm-6 col-md-4 " ><angucomplete  showlabel="true" title="Fournisseur" searchstr="NEWITEM.frn" dizabled="INFO" placeholder="Recherche Fournisseurs "  idx="honputsearchd"  showfield="name" selectedid="NEWITEM.id_four"   pause="100"  url="php/filter?action=four&c="   minlength="1" matchclass="highlighted" /></div><div class="col-12 col-sm-6 col-md-4 " ><div class="form-group  has-feedback has-success" ><label class="control-label" >Responsable</label><div class="fg-line"  ><input    type="text" value="<?=@$_SESSION['data']['name']; ?>" disabled="disabled"  class="form-control"  ></div></div></div></div><div style="margin-bottom:250px"><table style="width:100%" class=" tablex  table  teal  white" cellspacing="0"><tr><th style="width:25%"><b>Produit</b></th><th style="width:11%"><b>Quantite</b></th><th style="width:11%"><b>Prix Achat</b></th><th style="width:11%"><b>Prix Vente</b></th><th style="width:11%"><b>Date péremption</b></th><th style="width:3%"><span class="f-20 zmdi zmdi-delete  c-blue"></span></th></tr><tr ng-repeat="x in NEWITEM.items"><td class="p-0" style="overflow: inherit;"><angucomplete id="ex1{{x.id}" dizabled="INFO" placeholder="Recherche Produits " st="margin: 0px;" on-select="onSelect(result,x,$index)"    title="" stylex="padding:23px" style="margin-top:0px"  pause="100" classx="b-0" searchstr="x.namex"  selectedid="x.id" url="php/filter?action=pr_stock&c="   minlength="1"  matchclass="highlighted" /></td><td class="p-0"><input type='number' style="padding:23px" min="0"  ng-disabled="INFO" step="any" ng-keyup="$event.keyCode==13?add_line():''" ng-model="x.q" class="form-control b-0" placeholder="Quantité"  /></td><td class="p-0"><input type='number' style="padding:23px" min="0"  ng-disabled="INFO" step="any" ng-keyup="$event.keyCode==13?add_line():''" ng-model="x.prix_achat" class="form-control b-0" placeholder="Prix achat"  /></td><td class="p-0"><input type='number' style="padding:23px" min="0"  ng-disabled="INFO" step="any" ng-keyup="$event.keyCode==13?add_line():''" ng-model="x.prix_vente" class="form-control b-0" placeholder="prix vente"  /></td><td class="p-0"><input type='date' style="padding:23px"  ng-disabled="INFO"  ng-model="x.date_pre" class="form-control b-0"  /></td> <td ng-click="delet($index,x.xxx)" ><span class="zmdi zmdi-delete c-blue f-20"></span></td>	</tr></table><a  class="btn btn-primary zmdi zmdi-plus pull-right m-5" tooltip-class="tooltip-blue" uib-tooltip="Ajouter une ligne" ng-click="add_line()" tooltip-placement="left" ></a></div></form></div><div class="clearfix"></div>           	   </div></div></div></div></div></div><script type="text/ng-template" id="editentree.html">	<div class="modal-content"><div class="smallloading" ng-if="LoaDing"></div><form name="pay" ng-submit="save(2)"><div class="modal-header text-center"><h4 class="modal-title c-white">Infos Paiement {{NEWITEM.bl}}</h4></div><div class="modal-body"><div class="row"><div class="col-sm-6"><div class="input-group m-t-20"><label class="control-label">Date Entree</label>		<div class="fg-line"><input type="date" required class="form-control" ng-model="NEWITEM.date_en"></div>	</div></div><div class="col-sm-6"><div class="input-group m-t-20"><label class="control-label">Quantité</label>		<div class="fg-line"><input type="number" required min="0" step="any" class="form-control" ng-model="NEWITEM.q"></div>	</div></div><div class="col-sm-6"><div class="input-group m-t-20"><label class="control-label">Prix Achat</label>		<div class="fg-line"><input type="number"  min="0" step="any" class="form-control" ng-model="NEWITEM.prix_achat"></div>	</div></div><div class="col-sm-6"><div class="input-group m-t-20"><label class="control-label">Prix Vente</label>		<div class="fg-line"><input type="number"  min="0" step="any" class="form-control" ng-model="NEWITEM.prix_vente"></div>	</div></div><div class="col-sm-12"><div class="input-group m-t-20"><label class="control-label">Date  péremption</label>		<div class="fg-line"><input type="date"  class="form-control" ng-model="NEWITEM.date_pre"></div>	</div></div></div>						</div>		<div class="modal-footer">			<button class="btn btn-link" type="submit" ng-disabled="pay.$invalid" >OK</button>			<button class="btn btn-link" type="reset"  ng-click="instance.close()">Cancel</button>		</div>		</form></div></script>